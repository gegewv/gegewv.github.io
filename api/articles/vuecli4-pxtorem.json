{"title":"vue cli4引入vant并配置自动rem换算 postcss-pxtorem和lib-flexibl + 黑名单","slug":"vuecli4-pxtorem","date":"2021-09-25T02:49:50.000Z","updated":"2021-09-25T02:58:41.267Z","comments":true,"path":"api/articles/vuecli4-pxtorem.json","photos":[],"link":"","excerpt":"在引入 vant 的时候，我看到官方推荐了两个自动转换 px 为 rem 的插件，一个叫postcss-pxtorem，一个叫lib-flexible。","covers":null,"content":"<blockquote>\n<p>在引入 <code>vant</code> 的时候，我看到官方推荐了两个自动转换 <code>px</code> 为 <code>rem</code> 的插件，一个叫<code>postcss-pxtorem</code>，一个叫<code>lib-flexible</code>。</p>\n</blockquote>\n<span id=\"more\"></span>\n\n<p><strong>安装插件：</strong></p>\n<ul>\n<li><em>安装 **<code>postcss-pxtorem</code></em></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install postcss-pxtorem --save-dev</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>_安装 **<code>lib-flexible</code>_，由于时间的问题， <code>lib-flexible</code> 其实已经弃用了，现在是使用名为<code>amfe-flexible</code>的插件， <code>amfe-flexible</code> 实际上就是在 <code>lib-flexible</code> 的基础上更新的，所以用法都是一样。</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -s  amfe-flexible</span><br></pre></td></tr></table></figure>\n\n<p>安装完毕只需要引入<code>amfe-flexible</code></p>\n<p><strong>引入插件：</strong></p>\n<ul>\n<li>main.js 文件引入：</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;amfe-flexible&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>创建配置文件：</strong></p>\n<p>在根目录，和 <code>package.json</code> 同级，创建一个名为<code>postcss.config.js</code>的文件，然后里面的内容我直接照搬 vant 提供的。</p>\n<p>如果有这个文件，可以自行修改里面的内容，没有才创建。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">autoprefixer</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">browsers</span>: [<span class=\"string\">&#x27;Android &gt;= 4.0&#x27;</span>, <span class=\"string\">&#x27;iOS &gt;= 8&#x27;</span>],</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">&#x27;postcss-pxtorem&#x27;</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">rootValue</span>: <span class=\"number\">37.5</span>,</span><br><span class=\"line\">      <span class=\"attr\">propList</span>: [<span class=\"string\">&#x27;*&#x27;</span>],</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>然后保存，这个时候我们再去 vue 里面，对元素设置 px，运行时会发现网页上自动转换成了 <code>rem</code> 单位。</p>\n<p>百度到一个新的配置</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&#x27;autoprefixer&#x27;</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">overrideBrowserslist</span>: [</span><br><span class=\"line\">        <span class=\"string\">&#x27;Android 4.1&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;iOS 7.1&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;Chrome &gt; 31&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;ff &gt; 31&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;ie &gt;= 8&#x27;</span></span><br><span class=\"line\">      ]</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">&#x27;postcss-pxtorem&#x27;</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">rootValue</span>: <span class=\"number\">37.5</span>,</span><br><span class=\"line\">      <span class=\"attr\">propList</span>: [<span class=\"string\">&#x27;*&#x27;</span>]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"黑名单\"><a href=\"#黑名单\" class=\"headerlink\" title=\"黑名单\"></a>黑名单</h2><p>顾名思义，在黑名单中的类名，将不会自动 <code>rem</code> 转换</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&#x27;autoprefixer&#x27;</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">overrideBrowserslist</span>: [</span><br><span class=\"line\">        <span class=\"string\">&#x27;Android 4.1&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;iOS 7.1&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;Chrome &gt; 31&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;ff &gt; 31&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;ie &gt;= 8&#x27;</span></span><br><span class=\"line\">      ]</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">&#x27;postcss-pxtorem&#x27;</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">rootValue</span>: <span class=\"number\">37.5</span>,</span><br><span class=\"line\">      <span class=\"attr\">propList</span>: [<span class=\"string\">&#x27;*&#x27;</span>],</span><br><span class=\"line\">      <span class=\"attr\">selectorBlackList</span>: [<span class=\"string\">&#x27;.van-notify&#x27;</span>,],</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":[],"tags":[{"name":"vue","slug":"vue","count":1,"path":"api/tags/vue.json"}]}